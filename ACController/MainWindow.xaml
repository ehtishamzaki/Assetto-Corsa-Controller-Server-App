<Window x:Class="ACController.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:ACController"
        mc:Ignorable="d" 
        DataContext="{Binding RelativeSource={RelativeSource Self}}"
        ResizeMode="NoResize" WindowState="Maximized" Topmost="True"
        Title="MainWindow" Height="450" Width="800" WindowStyle="None">
    <Window.Resources>
        <ResourceDictionary>

            <Style TargetType="WrapPanel">
                <Setter Property="Margin" Value="0, 5" />
            </Style>
            
            <Style x:Key="BannerFrame" TargetType="Rectangle">
                <Setter Property="Height" Value="200" />
                <Setter Property="Fill" Value="Black" />
                <Setter Property="Opacity" Value="0.85" />
            </Style>
            
            <Style x:Key="ImageBorder" TargetType="Border">
                <Setter Property="HorizontalAlignment" Value="Left" />
                <Setter Property="VerticalAlignment" Value="Stretch" />
                <Setter Property="Padding" Value="0" />
                <Setter Property="Margin" Value="0, 5, 0, 0" />
            </Style>

            <Style x:Key="VisitorNamePanel" TargetType="StackPanel">
                <Setter Property="Visibility" Value="Collapsed" />
                <Setter Property="VerticalAlignment" Value="Center" />
                <Style.Triggers>
                    <MultiDataTrigger>
                        <MultiDataTrigger.Conditions>
                            <Condition Binding="{Binding IsConnected}" Value="true" />
                            <Condition Binding="{Binding IsAssigned}" Value="true" />
                            <Condition Binding="{Binding IsResultAvailable}" Value="false" />
                        </MultiDataTrigger.Conditions>
                        <Setter Property="Visibility" Value="Visible" />
                    </MultiDataTrigger>
                </Style.Triggers>
            </Style>
            <Style x:Key="RaceResultPanel" TargetType="StackPanel">
                <Setter Property="Visibility" Value="Collapsed" />
                <Setter Property="Orientation" Value="Horizontal" />
                <Setter Property="VerticalAlignment" Value="Center" />
                <Setter Property="HorizontalAlignment" Value="Center" />
                <Style.Triggers>
                    <MultiDataTrigger>
                        <MultiDataTrigger.Conditions>
                            <Condition Binding="{Binding IsConnected}" Value="true" />
                            <Condition Binding="{Binding IsAssigned}" Value="true" />
                            <Condition Binding="{Binding IsResultAvailable}" Value="true" />
                        </MultiDataTrigger.Conditions>
                        <Setter Property="Visibility" Value="Visible" />
                    </MultiDataTrigger>
                </Style.Triggers>
            </Style>

            <Style x:Key="WelcomeText" TargetType="Label" BasedOn="{StaticResource {x:Type Label}}">
                <Setter Property="FontWeight" Value="UltraLight" />
                <Setter Property="FontSize" Value="50" />
                <Setter Property="FontStretch" Value="Condensed" />
                <Setter Property="HorizontalContentAlignment" Value="Center" />
            </Style>

            <Style x:Key="ResultHead" TargetType="Label" BasedOn="{StaticResource {x:Type Label}}">
                <Setter Property="FontWeight" Value="UltraLight" />
                <Setter Property="FontSize" Value="20" />
                <Setter Property="FontStretch" Value="Condensed" />
                <Setter Property="VerticalAlignment" Value="Top" />
                <Setter Property="HorizontalContentAlignment" Value="Left" />
            </Style>
            <Style x:Key="ResultInfo" TargetType="Label" BasedOn="{StaticResource {x:Type Label}}">
                <Setter Property="FontWeight" Value="UltraLight" />
                <Setter Property="FontSize" Value="40" />
                <Setter Property="FontStretch" Value="Condensed" />
                <Setter Property="HorizontalContentAlignment" Value="Center" />
            </Style>
            <Style x:Key="NameLabelText" TargetType="Label" BasedOn="{StaticResource {x:Type Label}}">
                <Setter Property="FontSize" Value="80" />
                <Setter Property="FontStretch" Value="Condensed" />
                <Setter Property="HorizontalContentAlignment" Value="Center" />
            </Style>
            <Style x:Key="MachineNotAssigned" TargetType="Label" BasedOn="{StaticResource {x:Type Label}}">
                <Setter Property="Visibility" Value="Collapsed" />
                <Setter Property="FontWeight" Value="Bold" />
                <Setter Property="FontSize" Value="90" />
                <Setter Property="FontStretch" Value="UltraCondensed" />
                <Setter Property="HorizontalContentAlignment" Value="Center" />
                <Setter Property="VerticalContentAlignment" Value="Center" />
                <Style.Triggers>
                    <MultiDataTrigger>
                        <MultiDataTrigger.Conditions>
                            <Condition Binding="{Binding IsConnected}" Value="true" />
                            <Condition Binding="{Binding IsAssigned}" Value="false" />
                        </MultiDataTrigger.Conditions>
                        <Setter Property="Visibility" Value="Visible" />
                    </MultiDataTrigger>
                </Style.Triggers>
            </Style>
            <Style x:Key="ConnectingServerLabel" TargetType="Label" BasedOn="{StaticResource {x:Type Label}}">
                <Setter Property="Visibility" Value="Collapsed" />
                <Setter Property="FontWeight" Value="Bold" />
                <Setter Property="FontSize" Value="24" />
                <Setter Property="FontStretch" Value="Condensed" />
                <Setter Property="HorizontalContentAlignment" Value="Center" />
                <Setter Property="VerticalContentAlignment" Value="Center" />
                <Style.Triggers>
                    <DataTrigger Binding="{Binding IsConnected}" Value="false">
                        <Setter Property="Visibility" Value="Visible" />
                    </DataTrigger>
                </Style.Triggers>
            </Style>
            
        </ResourceDictionary>
    </Window.Resources>

    <Grid>
        <Grid.Background>
            <ImageBrush ImageSource="/Images/Background.jpg"/>
        </Grid.Background>

        <Canvas Visibility="Collapsed" Panel.ZIndex="1000">
            <Button x:Name="btnCoordinates" 
                    Canvas.Left="0" Canvas.Top="125" 
                    Height="100" Width="100" 
                    IsEnabled="False"
                    Content="Get Coordinates" Click="Button_Click" />
        </Canvas>

        <Rectangle Style="{StaticResource BannerFrame}" />

        <Label Style="{StaticResource ConnectingServerLabel}" 
               Content="Please wait while the Simulator is connecting to server..." />

        <Label Style="{StaticResource MachineNotAssigned}"
               Content="Awaiting Player" />

        <StackPanel Style="{StaticResource VisitorNamePanel}">
            <Label Style="{StaticResource WelcomeText}" Content="Welcome," />
            <Label Style="{StaticResource NameLabelText}" Content="{Binding VisitorName}" d:Content="{}{{ PLAYER NAME }}" />
        </StackPanel>

        <StackPanel Style="{StaticResource RaceResultPanel}" d:Visibility="Visible">
            <StackPanel Margin="0, 0, 50, 0">
                <Label Style="{StaticResource NameLabelText}" Content="{Binding RacePosition}" d:Content="1st" />
                <Label Style="{StaticResource WelcomeText}" Content="{Binding VisitorName}" d:Content="PLAYER NAME" />
            </StackPanel>
            <StackPanel Margin="50, 0, 0, 0" VerticalAlignment="Center">
                <WrapPanel>
                    <Image Source="/Images/mapIcon.png" Stretch="Uniform" Width="32" Margin="0,0,10,0" />
                    <Label Style="{StaticResource ResultInfo}" Content="{Binding TrackName}" d:Content="Imola"  />
                </WrapPanel>
                <WrapPanel>
                    <Image Source="/Images/carIcon.png" Stretch="Uniform" Width="32" Margin="0,0,10,0" />
                    <Label Style="{StaticResource ResultInfo}" Content="{Binding CarName}" d:Content="Abarth 500 EsseEsse"  />
                </WrapPanel>
                <WrapPanel>
                    <Image Source="/Images/timeIcon.png" Stretch="Uniform" Width="32" Margin="0,0,10,0" />
                    <Label Style="{StaticResource ResultInfo}" Content="{Binding BestLapTime}" d:Content="0 min. 58 sec."  />
                    <Label Style="{StaticResource ResultHead}" Margin="-10,0,0,0" Content="(Best lap)" />
                </WrapPanel>
            </StackPanel>
        </StackPanel>
        
    </Grid>
</Window>
